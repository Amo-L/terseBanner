<!DOCTYPE html>
<html>
<head>
	<title>Preload - easyBanner</title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	<div class="banner-preload">
		<ul>
			<li><img data-src="http://img.bizhi.sogou.com/images/2014/09/15/876564.jpg"></li>
			<li><img data-src="http://img.bizhi.sogou.com/images/2014/09/19/881411.jpg"></li>
			<li><img data-src="http://img.bizhi.sogou.com/images/2014/09/15/876561.jpg"></li>
			<li><img data-src="http://img.bizhi.sogou.com/images/2014/09/15/876559.jpg"></li>
			<li><img data-src="http://img.bizhi.sogou.com/images/2015/05/29/1184400.jpg"></li>
			<li><img data-src="http://img.bizhi.sogou.com/images/2014/09/15/876564.jpg"></li>
			<li><img data-src="http://img.bizhi.sogou.com/images/2014/09/19/881411.jpg"></li>
			<li><img data-src="http://img.bizhi.sogou.com/images/2014/09/15/876561.jpg"></li>
			<li><img data-src="http://img.bizhi.sogou.com/images/2014/09/15/876559.jpg"></li>
			<li><img data-src="http://img.bizhi.sogou.com/images/2015/05/29/1184400.jpg"></li>


			<!-- <li><img data-src="http://img.bizhi.sogou.com/images/2015/02/03/1071760.jpg"></li>
			<li><img data-src="http://img.bizhi.sogou.com/images/2015/05/04/1164586.jpg"></li>
			<li><img data-src="http://img.bizhi.sogou.com/images/2014/11/27/979874.jpg"></li>
			<li><img data-src="http://img.bizhi.sogou.com/images/2015/02/03/1071760.jpg"></li>
			<li><img data-src="http://img.bizhi.sogou.com/images/2015/05/04/1164586.jpg"></li>
			<li><img data-src="http://img.bizhi.sogou.com/images/2014/11/27/979874.jpg"></li> -->
		</ul>
	</div>
	<div class="console-panle" style="font: 18px/25px Arial;"></div>
</body>
<script type="text/javascript" src="../lib/highlight.min.js"></script>
<script type="text/javascript" src="../lib/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="../src/jquery.easyBanner.js"></script>
<!-- <script type="text/javascript" src="script.js"></script> -->
<script>
	$(function() {
		var log = '';
		var timeCount = 0;
		var $item = $('.banner-preload ul li');

		$item.each(function() {
			var $img = $(this).find('img'),
				src  = $img.attr('data-src'); 

			$img.attr('data-src', src + '?timeStamp=' + Math.random());
		});

		$('.banner-preload').easyBanner();

		timer = setInterval(function() {
			log = '';

			$item.each(function() {
				if ($(this).hasClass('loaded')) {
					log += '<p>' + ($(this).index() + 1) + 'th image was loaded</p>';
				} else {
					log += '<p>' + ($(this).index() + 1) + 'th image is loading</p>';
				}

				$('.console-panle').html(log);
			});

			timeCount += 10;

			if ($item.filter('[class*="loaded"]').length === $item.length) {
				log += '<p><b>All of the images have finished loadingÔºÅSpent ' + timeCount + 'ms</p>';

				$('.console-panle').html(log);

				clearInterval(timer);
			}
		}, 10);
	});
</script>
</html>